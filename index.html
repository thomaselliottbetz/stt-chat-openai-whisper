<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <link rel="stylesheet" href="/main.css?v=6" />
    <title>Type or Talk</title>
  </head>
  <body>
    <!-- Landing Page -->
    <main id="landingView">
      <h1>Type <span class="pulse">or</span> Talk</h1>
      <p>Switch seamlessly between voice and text.</p>
      <button id="openLogin" class="enter-chat-button">Enter Chat</button>
      <footer>&copy; 2025 Your Company Name. All rights reserved.</footer>
    </main>

    <!-- Login Modal -->
    <div id="loginModal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <button class="close-modal" id="closeLoginModal">&times;</button>
        <h2>Login</h2>
        <form id="loginForm">
          <input type="text" id="username" placeholder="Username" required />
          <input
            type="password"
            id="password"
            placeholder="Password"
            required
          />
          <button type="submit">Login</button>
          <div id="loginError" class="error"></div>
        </form>
        <div class="divider"></div>
        <div>
          <p><strong>First time here?</strong></p>
          <form id="inviteForm">
            <input
              type="text"
              id="inviteCode"
              placeholder="Enter Invite Code"
              required
            />
            <button type="submit">Continue</button>
            <div id="inviteError" class="error"></div>
          </form>
        </div>
        <div id="registerSection" style="margin-top: 1rem; display: none">
          <input
            type="text"
            id="registerUsername"
            placeholder="Choose username"
            required
          />
          <input
            type="password"
            id="registerPassword"
            placeholder="Choose password"
            required
          />
          <button id="registerBtn" disabled>Register</button>
          <div id="registerError" class="error"></div>
        </div>
      </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="chat-modal" style="display: none">
      <div class="chat-header">
        <div class="chat-header-left">
          <span id="currentUsername"></span>
          <button id="selectChatBtn" class="select-chat-button" style="display: none">
            <span id="selectedChatName">Select Chat</span>
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 4.5l3 3 3-3"/>
            </svg>
          </button>
        </div>
        <button id="logoutBtn">Log Out</button>
      </div>
      
      <!-- Chat Selector Modal (admin only) -->
      <div id="chatSelectorModal" class="modal-overlay" style="display: none">
        <div class="modal-content chat-selector-modal">
          <button class="close-modal" id="closeChatSelector">&times;</button>
          <h2>Select Chat</h2>
          <input type="text" id="chatSearchInput" placeholder="Search chats..." />
          <ul id="chatSelectorList" class="chat-selector-list"></ul>
        </div>
      </div>
      <div class="chat-rail">
        <div id="transcriptionBox" class="chat-messages"></div>
        <div class="compose">
          <div class="field-wrap">
            <textarea
              id="userText"
              placeholder="Type or speak your message…"
            ></textarea>
            <button id="micFab" class="fab mic-fab" aria-label="Record / stop">
              <svg
                class="icon mic-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
                focusable="false"
              >
                <!-- mic capsule -->
                <rect x="9" y="2" width="6" height="12" rx="3"></rect>
                <!-- support + base -->
                <path d="M5 10v2a7 7 0 0 0 14 0v-2"></path>
                <line x1="12" y1="19" x2="12" y2="22"></line>
                <line x1="8" y1="22" x2="16" y2="22"></line>
              </svg>
              <span class="sr-only">Record / stop</span>
            </button>
            <button id="sendFab" class="fab send-fab" aria-label="Send">
              ↑
            </button>
          </div>
        </div>
        
      </div>

      <footer>&copy; 2025 Your Company Name. All rights reserved.</footer>
    </div>

    <script src="/main.js?v=4"></script>
  </body>
</html>
